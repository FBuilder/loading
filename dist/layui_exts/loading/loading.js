+function(i,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(i)),e(t)}:i.layui&&layui.define?layui.define(["jquery"],function(i){i("loading",e(layui.$))}):e(jQuery)}(this,function(i){"use strict";var e=i.extend,t=window,n={},o={Illegal_operation:"\u975e\u6cd5\u64cd\u4f5c"},s=Object.prototype.toString,a={is:{string:function(i){return"[object String]"==s.call(i)},number:function(i){return"[object Number]"==s.call(i)},plainObject:function(i){return void 0!==i&&"[object Object]"===s.call(i)},undefined:function(i){return void 0===i||null===i},function:function(i){return"[object Function]"===s.call(i)}},loadImage:function(i,e,t){var n=new Image;return n.src=i,n.complete&&e?e(n):(n.onload=function(){n.onload=null,e&&e(n)},n.onerror=function(i){n.onerror=null,t&&t(i)},n)}};return e(i.fn,{loading:function(){function s(i){i&&null!==i.imgSrc&&a.is.number(i.imgSrc)&&(i.imgSrc=f[i.imgSrc]),this.hasNewSetting=a.is.plainObject(i),this.$this=i.$this,this.settings=e({},n.settings,this.hasNewSetting?i:{}),this.settings.overlayStyle=y,this.settings.imageStyle=m,this.settings.textStyle=w}var l="BODY,HTML,#document,undefined",r=l.indexOf(this[0].nodeName)>-1?i("body"):this,d="BODY"==r[0].nodeName,h=arguments[0],u=arguments[1],c=function(){throw new Error(o.Illegal_operation)},g="../images/loading/loading",f=[g+".gif",g+"-bars.gif"].concat(function(){for(var i=[],e=0;e<=8;e++)i.push(g+"-"+e+".gif");return i}()),p={resizeAll:function(){var e=this.settings&&(this.settings.offsetTop||0),n=i(".lay-loading:visible"),o=0,s={},a=0,l=0,r={};return n.each(function(n,d){s=i(d).parent(),r="fixed"===s.css("position")?{top:0,left:0}:s.offset(),a=s.outerWidth(),l=s.outerHeight(),"BODY"==s[0].nodeName?i(d).is("div")?i(d).css({width:"100%",height:"100%",position:"fixed"}):i(d).is("img")?(o=i(d).height(),i(d).css({position:"fixed",top:i(t).height()/2-i(d).height()/2-e,left:i(t).width()/2-i(d).width()/2})):i(d).css({position:"fixed",top:i(t).height()/2+(o?6:-i(d).height()/2)+o/2-e,left:i(t).width()/2-i(d).width()/2}):i(d).is("div")?i(d).css({width:a,height:l,top:r.top,left:r.left}):i(d).is("img")?(o=i(d).height(),i(d).css({top:l/2-i(d).height()/2+r.top-e,left:a/2-i(d).width()/2+r.left})):i(d).css({top:l/2+o/2+(o?6:-i(d).height()/2)+r.top-e,left:a/2-i(d).width()/2+r.left})}),this},subsequent:function(){var e=arguments[0],n=e.parent().data("loading")||this,o=n.settings.animateTime,s=n.$this,a=n.settings[arguments[1]],l=arguments[2],r=arguments[3],d=arguments[4];return e.fadeOut(o,function(){i(this)[l]()}),t.setTimeout(function(){!d&&a&&a(n,s,"hide"==l?e:void 0),!d&&s.trigger("lay-loading."+r,n)},o),n}};n.settings=n.settings||{overlayClassName:"",imgClassName:"",background:"#fff",opacity:.6,text:"",textCss:"",textClassName:"",offsetTop:0,imgSrc:f[0],beforeShow:function(){},afterShow:function(){},imgZIndex:2e7,overlayZIndex:19999999,afterHide:function(){},afterHideAll:function(){},animateTime:600,clickHide:!1};var y={background:"#fff",height:0,width:0,top:0,left:0,"z-index":0,opacity:0,position:"absolute"},m={left:-19999999,top:-19999999,"z-index":0,position:"absolute"},w={top:-19999999,left:-19999999,"z-index":0,position:"absolute","white-space":"nowrap"};if(e(s.prototype,{show:function(){var n=this,o=this.$this,s=this.settings,l=s.beforeShow,r=s.overlayStyle,h=s.imageStyle,u=s.textStyle,g=s.textCss||{},y=o.children(".lay-loading"),m=!a.is.undefined(s.imgSrc);return l&&l(this,o),!this.hasNewSetting&&y.size()>0?(p.subsequent.apply(this,[y,"afterShow","show","show"]),i(t).trigger("resize.lay-loading")):(this.destroy("auto"),a.loadImage(m?s.imgSrc:f[0],function(a){var l=i("<div></div>"),c=i("<img />"),f=i("<span></span>"),p=i.trim(s.text),y=d?window.screen.availWidth:o.outerWidth(),w=d?window.screen.availHeight:o.outerHeight();r.background=s.background,r["z-index"]=s.overlayZIndex,r.opacity=s.opacity,r.height=w,r.width=y,h["z-index"]=s.imgZIndex,u["z-index"]=s.imgZIndex,l.addClass("lay-loading").addClass(s.overlayClassName).css(r).appendTo(o).hide(),c.addClass("lay-loading").addClass(s.imgClassName).css(h).attr("src",a.src).appendTo(o).hide(),f.addClass("lay-loading").addClass(s.textClassName).css(e({},u,g)).text(p).appendTo(o).hide(),setTimeout(function(){l[s.opacity?"show":"remove"](),c[m?"show":"remove"](),f[p.length?"show":"remove"](),i(t).trigger("resize.lay-loading"),s.afterShow&&s.afterShow(n,o),o.trigger("lay-loading.show")},100)},function(i){throw new Error(i)})),{hide:c,hideAll:c,destroy:c,destroyAll:c}},toggle:function(){return this.$this.children(".lay-loading:visible").size()>0?this.hide():this.show()},hide:function(){return p.subsequent.apply(this,[this.$this.children(".lay-loading"),"afterHide","hide","hide"])},hideAll:function(){return p.subsequent.apply(this,[i(".lay-loading"),"afterHideAll","hide","hideAll"])},destroy:function(i){return p.subsequent.apply(this,[this.$this.children(".lay-loading"),"afterHide","remove","destroy",i])},destroyAll:function(){return p.subsequent.apply(this,[i(".lay-loading"),"afterHideAll","remove","destroyAll"])}}),a.is.plainObject(h))return h.imgSrc&&(h.imgSrc=f[h.imgSrc]),r.loading("show",e(n.settings,h));if(a.is.string(h)||!h){var v={},b=[];h=h||"show",r.each(function(e,t){u?u.$this=i(t):u={$this:i(t)},v=new s(u),i(t).data("loading",v),a.is.function(v[h])&&v[h](),b.push(v),i(t).off("click.lay-loading.clickHide").on("click.lay-loading.clickHide",".lay-loading",function(){v.settings.clickHide&&i(t).data("loading").hide()})}),i(t).off("resize.lay-loading").on("resize.lay-loading",function(){p.resizeAll.call(r.data("loading"))})}return b.length>1?b:b[0]}}),i});